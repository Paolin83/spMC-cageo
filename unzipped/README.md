# spMC

## spMC: an R-package for 3D lithological reconstructions based on spatial Markov chains

### Authors information
[Luca Sartore](mailto://luca.sartore@unive.it)^1^, [Paolo Fabbri](paolo.fabbri@unipd.it)^2^, [Carlo Gaetan](mailto://gaetan@unive.it)^1^

  1. Dipartimento di Scienze Ambientali, Informatica e Statistica,
     Università "Ca' Foscari" di Venezia,
     Campus Scientifico, Via Torino 155,
     I-30172 Mestre-Venezia, Italy
  2. Dipartimento di Geoscienze,
     Università di Padova,
     via Gradenigo 6,
     35131 Padova, Italy

- - -

### Description of the included files

The content of this folder consists of the following files:

  1. `spMC_0.3.6.3153.tar.gz`, a compressed archive including the **source code** of the R package according to the [CRAN's rules](https://cran.r-project.org/web/packages/policies.html);
  2. `spMC.Rcheck.zip`, a compressed archive containing the **output files** generated by the `R CMD check` command;
  3. [`spMC-manual.pdf`](./spMC-manual.pdf), the pdf file of the **user manual** containing the description of the functions and useful examples;
  4. `readme.txt`, a text file required to facilitate the assignment of the code to the correct submission;
  5. `README.html`, a HTML file provided to make more readable the markdown source at the previous point from a web-browser;
  6. `README.md`, a markdown file including additional information on the software required to use the package (it is optimized for [Haroopad](http://pad.haroopress.com/user.html) view -- with *github* as theme for the viewer and *mono-blue* as theme for the code);
  7. `script.R`, a R-script file providing the code used to produce the analyses of the case study presented in the article.

#### Brief description of the compressed source code
The file `spMC_0.3.6.3153.tar.gz` contains the source code of the R package *spMC* (version 0.3.6.3153, see the extracted folder `spMC/`). The files are organized through the following folders:

  1. `spMC/`, which contains the standard files used by R to  install, load, update or remove the package;
  2. `spMC/data/`, which contains **a data-set (ACM) to test the functions** provided by the package;
  3. `spMC/man/`, which contains the help files in Rd format for each developed function;
  4. `spMC/R/`, which contains the R scripts for each developed function;
  5. `spMC/src/`, which contains the C files to speed-up most of the computations;
  6. `spMC/test/`, which contains an R script for testing the package (e.g. memory leakage, ...).

#### Brief description of the main output files in the compressed archive
The file `spMC.Rcheck.zip` contains the folder `spMC.Rcheck/`, which includes all the files generated by the command `R CMD check`. All the included file were generated on a Fedora 22 operative system (based on a 4.1.7-200 x86_64 GNU/Linux kernel) with an Intel(R) Core(TM) i7-4700MQ CPU at 2.40GHz and 12GB of RAM. The following points describe briefly the main outputs of the CRAN-compliance tests:

  1. the folder `spMC.Rcheck/spMC/` contains the output files for testing whether package *spMC* can be installed;
  2. the folder `spMC.Rcheck/tests/` contains the output files for testing whether all functions provided by the package can be executed (including the source of an R script for minimal examples of use);
  3. the file `spMC.Rcheck/00check.log` describes the details of each test performed and its results (e.g. 'OK', 'Note', 'Warning', or 'Error');
  4. the file `spMC.Rcheck/00install.out` shows the steps performed during the installation;
  5. the files `spMC.Rcheck/Rdlatex.log` and `spMC.Rcheck/spMC-manual.log` describe the details of pdf generation for the manual [`spMC-manual.pdf`](./spMC-manual.pdf).

## Features of the package
The package *spMC* provides a set of functions to deal with the following issues:

  * analyses of the stratum lengths along any chosen direction;
  * fast estimation of continuous-lag spatial-Markov-chains parameters, and probability computing (also for large data sets);
  * production of graphical outputs based on transition probability for both transiograms and section-images;
  * simulation of categorical random fields by the use of the most recent techniques presented in the literature.

## Requirements
Most recent versions of the following software are always preferred, however the minimal requirements are also specified. The common software required by three main-stream operative systems are provided below, and any specific requirement is treated separately:

 * [R software](http://www.r-project.org/): the minimal requirement is R version 3.0.0.

 * [R packages](http://cran.r-project.org/) (it is preferred if the most recent versions allowed by R are installed for each of the following packages, which should be installed by default):
     * `methods`, for dealing with R objects and classes;
     * `datasets`, for dealing with the data-sets files and different connections between R and databases;
     * `utils`, for dealing with the functions used for testing packages and for producing the manuals;
     * `grDevices`, for dealing with graphical devices (such as graphical file formats, ...);
     * `graphics`, for dealing with standard graphical functions to plot images;
     * `stats`, for dealing with standard statistical functions.

To update all the installed packages to the last version available, type the following command line from the R console:
```R
update.packages(ask = FALSE)
```
The additional software must be installed before to update the required packages.

### Additional software on Linux

 * [GNU compilers](https://gcc.gnu.org/): the minimal requirement is gcc version 4.3.0.

### Additional software on Windows
 * [Rtools](https://cran.r-project.org/bin/windows/Rtools/) is a library which provides the GNU compilers. The minimal requirement is `Rtools31.exe`, or other versions according to the R version already installed. Successively, the environmental variable `PATH` must be edited, because it must include the folders containing the GNU compilers provided.

### Additional software on (Mac) OS X
 * [X-code](https://developer.apple.com/xcode/download/) is required to install the GNU compilers. The minimal requirement is gcc version 4.2.1 (which does not allow for parallel computing). Any version of X-code, which allows to install a more recent version of the GNU compilers, should be installed.

## Package management
### Installing the spMC package
The use of the following command in a terminal session is highly suggested to install an R package form a source-code compressed archive on **Linux** and **(Mac) OS X**:
```bash
R CMD INSTALL spMC_0.3.6.3153.tar.gz
```

On **Windows**, by opening the command prompt (`cmd.exe`), it is possible to point to the proper directory with `cd`, and then install the package via `Rcmd.exe` with the following command:

```bash
Rcmd.exe INSTALL spMC_0.3.6.3153.tar.gz
```

More details can be found on the "Installing packages" section of the [R-admin](https://cran.r-project.org/doc/manuals/R-admin.html) manual.

### Updating the spMC package
To update the *spMC* package, it is necessary to type the following code from the R console:
```R
update.packages("spMC")
```

### Removing the spMC package
To remove *spMC* from the list of R packages, it is necessary to type the following code from the R console:
```R
remove.packages("spMC")
```
## License
The package is distributed on CRAN at [this web page](https://cran.r-project.org/web/packages/spMC/index.html) under the terms of the [GENERAL PUBLIC LICENSE (>= 2)](https://cran.r-project.org/web/licenses/GPL-2). The package spMC version 0.3.6.3153 was edited in order to satisfy the requirement for the manuscript submission to *Computer and Geosciences* (Elsevier). This specific version will never appear on the CRAN servers, but it can be available on the Elsevier servers with the same terms and conditions specified by the [GENERAL PUBLIC LICENSE (>= 2)](https://cran.r-project.org/web/licenses/GPL-2).

## Aknoledgments

The development of this software was supported by “GEO-RISKS – Geological, morphological and hydrological processes: monitoring, modeling and impact in the Northeastern Italy”, funded by the University of Padua.
